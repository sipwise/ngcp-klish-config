<?xml version="1.0" encoding="UTF-8"?>
<CLISH_MODULE xmlns="http://clish.sourceforge.net/XMLSchema" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="http://clish.sourceforge.net/XMLSchema
                     http://clish.sourceforge.net/XMLSchema/clish.xsd">
	<!--=======================================================-->

<VIEW name="enable-view">

	<!-- NGCP Proxy DB -->

	<COMMAND name="show ngcp proxy db" help="Display NGCP Proxy DB information" />

   	<COMMAND name="show ngcp proxy db trusted" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show trusted</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy db lcr_gw" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show lcr_gw</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy db lcr_rule" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show lcr_rule</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy db lcr_rule_target" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show lcr_rule_target</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy db dialplan" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show dialplan</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy db location" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show location</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy db sems_registrations" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show sems_registrations</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy db watchers" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy db show active_watchers</ACTION>
   	</COMMAND>

	<!-- NGCP Proxy -->


	<COMMAND name="show ngcp proxy" help="Display NGCP Proxy information" />

   	<COMMAND name="show ngcp proxy debug" lock="false" help="Set Debug level" interrupt="true"/>
   	<COMMAND name="show ngcp proxy debug get" lock="false" help="Get PROXY Debug level" interrupt="true">
   	<ACTION>ngcp-kamctl proxy fifo debug</ACTION>
        </COMMAND>

   	<COMMAND name="show ngcp proxy debug set" lock="false" help="Set PROXY Debug level" interrupt="true">
		<PARAM name="level"
                        help="Debug Level"
                        optional="true"
                        mode="subcommand"
                        ptype="SUBCOMMAND">
                        <PARAM name="debuglevel"
				default="2"
                                help="Debug level to set"
                                ptype="UINT"/>
                </PARAM>
       		<ACTION>ngcp-kamctl proxy fifo debug ${debuglevel} </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy uptime" lock="false" help="Show Server Uptime" interrupt="true">
       		<ACTION>ngcp-sercmd proxy core.uptime </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy version" lock="false" help="Show Server Version" interrupt="true">
       		<ACTION>ngcp-sercmd proxy core.info </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy sockets" lock="false" help="Show Server Uptime" interrupt="true">
       		<ACTION>ngcp-sercmd proxy core.sockets_list </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy dialog" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy fifo get_statistics dialog:</ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy routes" lock="false" help="Show Proxy Routes" interrupt="true">
       		<ACTION>ngcp-kamctl proxy dialplan show</ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy stats" lock="false" help="Show TM Stats" interrupt="true">
       		<ACTION>ngcp-sercmd proxy tm.stats </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy list-dispatcher" lock="false" help="Show Dispatcher List" interrupt="true">
       		<ACTION>ngcp-sercmd proxy dispatcher.list </ACTION>
   	</COMMAND>

	<COMMAND name="show ngcp proxy list-users" help="Display NGCP Proxy information" />

   	<COMMAND name="show ngcp proxy list-users count" lock="false" help="Count Registered UL" interrupt="true">
       		<ACTION>ngcp-kamctl proxy fifo get_statistics usrloc::registered_users </ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy list-users online" lock="false" help="Show Registered UL" interrupt="true">
       		<ACTION>ngcp-kamctl proxy online </ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy list-users full" lock="false" help="Show Registered UL" interrupt="true">
       		<ACTION>ngcp-kamctl proxy ul show </ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy list-users brief" lock="false" help="Show Registered UL" interrupt="true">
       		<ACTION>ngcp-kamctl proxy ul show --brief </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy find-userid" lock="false" help="Find Registered UL" interrupt="true">
		<PARAM name="userloc"
                        help="This subscriber id name"
                        ptype="STRING"/>
       		<ACTION>ngcp-sercmd proxy ul.lookup location "${userloc}"</ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy find-URI" lock="false" help="Find Registered UL" interrupt="true">
		<PARAM name="useruri"
                        help="This subscriber USER@DOMAIN"
                        ptype="STRING"/>
       		<ACTION>ngcp-kamctl proxy ul show "${useruri}"</ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy domains-database" help="Show DOMAINS" interrupt="true"  lock="false">
        	<ACTION> ngcp-kamctl proxy domain show showdb </ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp proxy domains-memory" help="Show DOMAINS" interrupt="true"  lock="false">
        	<ACTION> ngcp-kamctl proxy domain show  </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy gateways" help="Show GATEWAYS" interrupt="true"  lock="false">
       		<ACTION>ngcp-sercmd proxy lcr.dump_gws </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy rules" help="Show GATEWAYS" interrupt="true"  lock="false">
       		<ACTION>ngcp-sercmd proxy lcr.dump_rules </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp proxy logs" lock="false" help="Show PROXY Logs" interrupt="true">
       		<ACTION>tail -n 30 /var/log/ngcp/kamailio-proxy.log </ACTION>
   	</COMMAND>

	<COMMAND name="show ngcp proxy search" lock="false" help="Search string in the current PROXY Logs" interrupt="true">
		<PARAM name="proxystring"
                        help="Specify a string to search (i.e. the Call-ID)"
                        ptype="STRING"/>
                <ACTION>grep "${proxystring}" /var/log/ngcp/kamailio-proxy.log > /home/cliuser/kamailio_proxy_log_${proxystring}</ACTION>
        </COMMAND>

	<COMMAND name="show ngcp proxy search-old" lock="false" help="Search string in old PROXY Logs" interrupt="true">
                <PARAM name="proxystringold"
                        help="Specify a string (i.e. the Call-ID)"
                        ptype="STRING"/>
                <ACTION>zgrep "${proxystringold}" /var/log/ngcp/old/kamailio-proxy-* > /home/cliuser/kamailio_old_proxy_log_${proxystring}</ACTION>
        </COMMAND>

	<COMMAND name="show ngcp proxy search list-file" lock="false" help="List all the log file created" interrupt="true">
                <ACTION>ls /home/cliuser/</ACTION>
        </COMMAND>

	<COMMAND name="show ngcp proxy search delete" lock="false" help="Delete an existing log file" interrupt="true">
		<PARAM name="logfilename"
                        help="Specify the name of the file to delete (see the file list with 'show ngcp proxy search list-file')"
                        ptype="STRING"/>
                <ACTION>rm /home/cliuser/${logfilename}</ACTION>
        </COMMAND>

        <COMMAND name="show ngcp proxy search open" lock="false" help="Open an existing log file" interrupt="true">
                <PARAM name="logfilename"
                        help="Specify the name of the file to open (see the file list with 'show ngcp proxy search list-file')"
                        ptype="STRING"/>
                <ACTION>cat /home/cliuser/${logfilename}</ACTION>
        </COMMAND>


   	<COMMAND name="show ngcp proxy calls" lock="false" help="Show PROXY concurrent calls" interrupt="true">
       		<ACTION>ngcp-kamctl proxy fifo dlg_list </ACTION>
   	</COMMAND>

	<COMMAND name="show ngcp proxy calls account" lock="false" help="Show PROXY concurrent calls per account" interrupt="true">
		<PARAM name="account"
                        help="Specify the account ID"
                        ptype="STRING"/>
                <ACTION>ngcp-kamctl proxy fifo profile_get_size account ${account} </ACTION>
        </COMMAND>


	<!-- NGCP LB -->

	<COMMAND name="show ngcp lb" help="Display NGCP Load-Balancer information" />

   	<COMMAND name="show ngcp lb version" lock="false" help="Show Server Version" interrupt="true">
       		<ACTION>ngcp-sercmd lb server </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp lb stats" lock="false" help="Show TM Stats" interrupt="true">
       		<ACTION>ngcp-sercmd lb sl.stats </ACTION>
   	</COMMAND>

   	<COMMAND name="show ngcp lb list-dispatcher" lock="false" help="Show TM Stats" interrupt="true">
       		<ACTION>ngcp-sercmd lb dispatcher.list </ACTION>
   	</COMMAND>


	<COMMAND name="show ngcp lb tls" help="Display NGCP Load-Balancer TLS information" />
   	<COMMAND name="show ngcp lb tls info" lock="false" help="Show LB TLS Info" interrupt="true">
       		<ACTION>ngcp-sercmd lb tls.info </ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp lb tls list" lock="false" help="Show LB TLS List" interrupt="true">
       		<ACTION>ngcp-sercmd lb tls.list </ACTION>
   	</COMMAND>
   	<COMMAND name="show ngcp lb tls options" lock="false" help="Show LB TLS Options" interrupt="true">
       		<ACTION>ngcp-sercmd lb tls.options </ACTION>
   	</COMMAND>



   	<COMMAND name="show ngcp lb logs" lock="false" help="Show LB Logs" interrupt="true">
       		<ACTION>tail /var/log/ngcp/kamailio-lb.log </ACTION>
   	</COMMAND>

	<!-- NGCP B2BUA -->

        <COMMAND name="show ngcp sems" help="Display NGCP SEMS/B2BUA information" />

        <COMMAND name="show ngcp sems stats" lock="false" help="Show Server Version" interrupt="true">
                <ACTION>sems-stats </ACTION>
        </COMMAND>

        <COMMAND name="show ngcp sems logs" lock="false" help="Show Server Version" interrupt="true">
                <ACTION>tail /var/log/ngcp/sems.log </ACTION>
        </COMMAND>



	<!-- NGCP MEDIAPROXY -->

        <COMMAND name="show ngcp mediaproxy" help="Display Mediaproxy-NG information" />

        <COMMAND name="show ngcp mediaproxy stats" lock="false" help="Show Mediaproxy-NG Version" interrupt="true">
                <ACTION>sems-stats </ACTION>
        </COMMAND>

        <COMMAND name="show ngcp mediaproxy logs" lock="false" help="Show Mediaproxy-NG Logs" interrupt="true">
                <ACTION>tail /var/log/ngcp/rtp.log </ACTION>
        </COMMAND>


</VIEW>

</CLISH_MODULE>
